
var BOARD_DATA_URL = 'OVERRIDE THIS IN VIEW';

var game_board = null;
var board_data = null;

$(document).ready(function() {

    game_board = new Board($("#game_board")[0]);

    refreshBoard();

    $("#zoom_level").change(function() {
        setSize($(this).val());
    });

    $('#game_board_viewport').dragscrollable({dragSelector:'#game_board'});

    $( "#zoom_slider" ).slider({
        orientation: "vertical",
        range: "min",
        min: 0.1,
        max: 2.0,
        step: 0.1,
        value: 1,
        slide: function(event, ui) {
            $("#zoom_level").val(ui.value).change();
        }
    });
    $( "#zoom_level" ).val( $( "#zoom_slider" ).slider( "value" ) );
});

function setSize(zoom) {
    game_board.zoom = parseFloat(zoom);
    game_board.draw(board_data);
}

function refreshBoard() {
    $.getJSON(BOARD_DATA_URL, function(data) {
        board_data = data;
        game_board.zoom = parseFloat($("#zoom_level").val());
        game_board.draw(data);
    });
}